(()=>{"use strict";var __webpack_modules__={991:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(81),_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(645),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'*{margin:0;padding:0;border:0;outline:none;font-family:"Lucida Sans Unicode","Lucida Grande",sans-serif}#reset,.dragging #url,.loaded #start,div.left,#controls,#controls input[type=checkbox]:checked~input[type=color]:after,.mobile .resize{display:none}.loaded #controls,loaded.dragging #dropzone{display:block}#start,.loaded #reset,.loaded div.left{display:flex}html{height:100%}body{font-size:.8rem;line-height:1.3rem;height:100%}#wrapper{max-width:940px;height:100%;margin:0 auto;position:relative}#wrapper.mobile,#wrapper.fullscreen{max-width:100%}#wrapper.mobile footer,#wrapper.fullscreen footer{height:0}#wrapper.mobile main,#wrapper.fullscreen main{height:calc(100% - 60px);border-radius:0}#start{width:100%;height:100%;position:relative;flex-direction:column}.loaded.dragging #start{display:block;position:absolute;top:0;left:0;background:rgba(255,255,255,.95);z-index:1;border-radius:25px}#dropzone{width:calc(100% - 40px);height:calc(70% - 40px);padding:20px;flex:1;position:relative}.dragging #dropzone{height:calc(100% - 40px)}#file{width:100%;height:100%;display:block;cursor:pointer;opacity:0;position:absolute;top:0;left:0;z-index:2}#dropzone label{width:calc(100% - 20px);height:calc(100% - 20px);border:10px dashed #ccc;border-radius:25px;display:flex;color:#ccc;justify-content:center;align-items:center}.dragging #dropzone label{border-color:#90ee90;color:#90ee90}#dropzone:hover label{border-color:#aaa;color:#aaa}#dropzone label span{padding:0 20px;display:block;text-align:center;font-size:1.8rem;font-weight:bold;line-height:2rem}#url{width:100%;padding:20px 0;color:#ccc;text-align:center}#url label{margin:0 0 10px;font-size:1.4rem;font-weight:bold;display:block}#url label:hover{color:#aaa;cursor:pointer}#url input{width:calc(100% - 60px);margin:0 auto;padding:10px;background:rgba(255,255,255,.8);border-radius:5px;color:#ccc;display:block;font-size:1.2rem}#url input:hover,#url input:focus{background:#fff;color:#444}#url button{width:calc(100% - 40px);margin:10px auto 0;padding:10px}header{height:60px;padding:0 20px;display:flex;gap:5px}header .title{flex:1;display:flex;flex-direction:column;justify-content:center}header .title h1{font-size:1.2rem}header .title>span{color:#aaa}header .title #reset{width:50px;height:50px;text-transform:uppercase;text-align:center;font-weight:bold;background:#eee;color:#444;border-radius:25px;cursor:pointer;align-items:center;justify-content:center;position:absolute;top:5px;left:10px;user-select:none}header .title #reset:hover{background-color:#000;color:#fff}header .github,header .resize{display:flex;justify-content:center;align-items:center}header .github svg,header .resize svg{width:100%;height:100%;display:block}header .github svg path,header .resize svg path{fill:#ccc}header .github:hover,header .resize:hover{transform:scale(1.2, 1.2);transition:all .1s linear}header .github:hover svg path,header .resize:hover svg path{fill:#aaa}header .github{padding:10px}header .resize{cursor:pointer}.loaded header{padding-left:75px}main{height:calc(100% - 80px);background-color:#f4f4f4;background-image:linear-gradient(45deg, #eee 25%, transparent 25%),linear-gradient(135deg, #eee 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #eee 75%),linear-gradient(135deg, transparent 75%, #eee 75%);background-size:40px 40px;background-position:0 0,20px 0,20px -20px,0px 20px;border-radius:25px;display:flex;flex-wrap:wrap;position:relative;overflow:hidden}main>.left{height:100%;background:linear-gradient(45deg, rgba(210, 210, 210, 0.7) 0%, rgba(250, 250, 250, 0.7) 100%);flex:1;flex-direction:column}#display{height:calc(100% - 147px);align-items:center;justify-content:center;display:flex;flex:1}.left>fieldset{padding:20px;color:rgba(0,0,0,.5);font-size:.7rem}.left>fieldset legend{height:20px;margin-bottom:5px;line-height:20px;position:relative;top:20px}.left legend span{margin:0 5px;cursor:pointer;color:rgba(0,0,0,.3)}.left legend span:hover{text-decoration:none;text-decoration:underline}.left legend span.on{color:inherit;text-decoration:underline}.left fieldset>div{overflow:hidden;display:inline-block}.left fieldset>div:nth-of-type(1){width:70%}.left fieldset>div:nth-of-type(2){width:30%;text-align:right}input[type=text],input[type=number]{background:rgba(255,255,255,.6);border-radius:3px;color:rgba(0,0,0,.5);font-size:.9rem;cursor:pointer;-moz-appearance:textfield}input[type=text]:hover,input[type=text]:focus,input[type=number]:hover,input[type=number]:focus{background:#fff;color:#000}.left fieldset input[type=number]{width:50px;height:23px;margin-right:3px;padding:0 5px;font-family:"Lucida Sans Unicode","Lucida Grande",sans-serif;text-align:right}.left fieldset input[type=number]::-webkit-inner-spin-button,.left fieldset input[type=number]::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}#export_size span{width:21px;display:inline-block}#export_size span:first-of-type{margin-right:20px}.left fieldset label{cursor:pointer}.left fieldset input[type=radio]{width:20px;height:20px;cursor:pointer;position:relative;top:5px}.left fieldset input[type=radio]:last-of-type{margin-left:10px}.left fieldset>div:nth-of-type(1) label{padding-right:5px}.left fieldset>div:nth-of-type(2) label{padding-left:5px}button{width:100%;height:50px;margin:0 auto;background:#b9ffba;border-radius:5px;font-size:1.2rem;font-weight:bold;line-height:1.2rem;text-transform:uppercase;letter-spacing:2px;display:block;cursor:pointer}button:hover{background:#b2f590}#controls{width:40%;min-width:190px;max-width:350px;height:100%;background:#ffe6e6;overflow:auto}#controls h2{padding:13px 10px;text-align:center}#controls fieldset>div{margin-bottom:5px;background-color:rgba(255,255,255,.2);position:relative;cursor:pointer;user-select:none}#controls input[type=checkbox]{width:20px;height:20px;position:absolute;top:calc(50% - 10px);left:20px;cursor:pointer}#controls label{padding:12px 80px 12px 60px;color:rgba(0,0,0,.5);display:block;cursor:pointer}#controls input[type=checkbox]:checked+label{color:#000}#controls input[type=color]{width:30px;height:30px;border-radius:20px;border:none;-webkit-appearance:none;cursor:pointer;transition:width .1s,height .1s,top .1s,right .1s;position:absolute;right:20px;top:calc(50% - 15px)}#controls input[type=color]::-webkit-color-swatch-wrapper{padding:0}#controls input[type=color]::-webkit-color-swatch{border:none;border-radius:20px}#controls input[type=color]:hover{width:36px;height:36px;top:calc(50% - 18px);right:17px}#controls input[type=color]:after{width:100%;height:100%;border-radius:20px;background:rgba(255,255,255,.5);content:"";display:block;position:absolute;top:0;left:0}#controls fieldset>div:hover{background-color:rgba(255,255,255,.7)}footer{height:20px}footer input[type=number]{width:5ch;height:30px;padding:2px 10px;font-size:1.3rem}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}',""]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},645:module=>{module.exports=function(cssWithMappingToString){var list=[];return list.toString=function(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},81:module=>{module.exports=function(i){return i[1]}},379:module=>{var stylesInDOM=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDOM.length;i++)if(stylesInDOM[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var indexByIdentifier=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3],supports:item[4],layer:item[5]};if(-1!==indexByIdentifier)stylesInDOM[indexByIdentifier].references++,stylesInDOM[indexByIdentifier].updater(obj);else{var updater=addElementStyle(obj,options);options.byIndex=i,stylesInDOM.splice(i,0,{identifier,updater,references:1})}identifiers.push(identifier)}return identifiers}function addElementStyle(obj,options){var api=options.domAPI(options);api.update(obj);return function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap&&newObj.supports===obj.supports&&newObj.layer===obj.layer)return;api.update(obj=newObj)}else api.remove()}}module.exports=function(list,options){var lastIdentifiers=modulesToDom(list=list||[],options=options||{});return function(newList){newList=newList||[];for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDOM[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDOM[_index].references&&(stylesInDOM[_index].updater(),stylesInDOM.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}},569:module=>{var memo={};module.exports=function(insert,style){var target=function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}(insert);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}},216:module=>{module.exports=function(options){var element=document.createElement("style");return options.setAttributes(element,options.attributes),options.insert(element,options.options),element}},565:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function(styleElement){var nonce=__webpack_require__.nc;nonce&&styleElement.setAttribute("nonce",nonce)}},795:module=>{module.exports=function(options){var styleElement=options.insertStyleElement(options);return{update:function(obj){!function(styleElement,options,obj){var css="";obj.supports&&(css+="@supports (".concat(obj.supports,") {")),obj.media&&(css+="@media ".concat(obj.media," {"));var needLayer=void 0!==obj.layer;needLayer&&(css+="@layer".concat(obj.layer.length>0?" ".concat(obj.layer):""," {")),css+=obj.css,needLayer&&(css+="}"),obj.media&&(css+="}"),obj.supports&&(css+="}");var sourceMap=obj.sourceMap;sourceMap&&"undefined"!=typeof btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),options.styleTagTransform(css,styleElement,options.options)}(styleElement,options,obj)},remove:function(){!function(styleElement){if(null===styleElement.parentNode)return!1;styleElement.parentNode.removeChild(styleElement)}(styleElement)}}}},589:module=>{module.exports=function(css,styleElement){if(styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={id:moduleId,exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.nc=void 0,(()=>{function createElement(query,ns){var ref=function(query){for(var chunks=query.split(/([.#])/),className="",id="",i=1;i<chunks.length;i+=2)switch(chunks[i]){case".":className+=" "+chunks[i+1];break;case"#":id=chunks[i+1]}return{className:className.trim(),tag:chunks[0]||"div",id}}(query),tag=ref.tag,id=ref.id,className=ref.className,element=ns?document.createElementNS(ns,tag):document.createElement(tag);return id&&(element.id=id),className&&(ns?element.setAttribute("class",className):element.className=className),element}function unmount(parent,child){var parentEl=getEl(parent),childEl=getEl(child);return child===childEl&&childEl.__redom_view&&(child=childEl.__redom_view),childEl.parentNode&&(doUnmount(child,childEl,parentEl),parentEl.removeChild(childEl)),child}function doUnmount(child,childEl,parentEl){var hooks=childEl.__redom_lifecycle;if(hooksAreEmpty(hooks))childEl.__redom_lifecycle={};else{var traverse=parentEl;for(childEl.__redom_mounted&&trigger(childEl,"onunmount");traverse;){var parentHooks=traverse.__redom_lifecycle||{};for(var hook in hooks)parentHooks[hook]&&(parentHooks[hook]-=hooks[hook]);hooksAreEmpty(parentHooks)&&(traverse.__redom_lifecycle=null),traverse=traverse.parentNode}}}function hooksAreEmpty(hooks){if(null==hooks)return!0;for(var key in hooks)if(hooks[key])return!1;return!0}var hookNames=["onmount","onremount","onunmount"],shadowRootAvailable="undefined"!=typeof window&&"ShadowRoot"in window;function mount(parent,child,before,replace){var parentEl=getEl(parent),childEl=getEl(child);child===childEl&&childEl.__redom_view&&(child=childEl.__redom_view),child!==childEl&&(childEl.__redom_view=child);var wasMounted=childEl.__redom_mounted,oldParent=childEl.parentNode;if(wasMounted&&oldParent!==parentEl&&doUnmount(0,childEl,oldParent),null!=before)if(replace){var beforeEl=getEl(before);beforeEl.__redom_mounted&&trigger(beforeEl,"onunmount"),parentEl.replaceChild(childEl,beforeEl)}else parentEl.insertBefore(childEl,getEl(before));else parentEl.appendChild(childEl);return function(child,childEl,parentEl,oldParent){for(var hooks=childEl.__redom_lifecycle||(childEl.__redom_lifecycle={}),remount=parentEl===oldParent,hooksFound=!1,i=0,list=hookNames;i<list.length;i+=1){var hookName=list[i];remount||child!==childEl&&hookName in child&&(hooks[hookName]=(hooks[hookName]||0)+1),hooks[hookName]&&(hooksFound=!0)}if(!hooksFound)return void(childEl.__redom_lifecycle={});var traverse=parentEl,triggered=!1;(remount||traverse&&traverse.__redom_mounted)&&(trigger(childEl,remount?"onremount":"onmount"),triggered=!0);for(;traverse;){var parent=traverse.parentNode,parentHooks=traverse.__redom_lifecycle||(traverse.__redom_lifecycle={});for(var hook in hooks)parentHooks[hook]=(parentHooks[hook]||0)+hooks[hook];if(triggered)break;(traverse.nodeType===Node.DOCUMENT_NODE||shadowRootAvailable&&traverse instanceof ShadowRoot||parent&&parent.__redom_mounted)&&(trigger(traverse,remount?"onremount":"onmount"),triggered=!0),traverse=parent}}(child,childEl,parentEl,oldParent),child}function trigger(el,eventName){"onmount"===eventName||"onremount"===eventName?el.__redom_mounted=!0:"onunmount"===eventName&&(el.__redom_mounted=!1);var hooks=el.__redom_lifecycle;if(hooks){var view=el.__redom_view,hookCount=0;for(var hook in view&&view[eventName]&&view[eventName](),hooks)hook&&hookCount++;if(hookCount)for(var traverse=el.firstChild;traverse;){var next=traverse.nextSibling;trigger(traverse,eventName),traverse=next}}}function setStyleValue(el,key,value){el.style[key]=null==value?"":value}var xlinkns="http://www.w3.org/1999/xlink";function setAttrInternal(view,arg1,arg2,initial){var el=getEl(view);if("object"==typeof arg1)for(var key in arg1)setAttrInternal(el,key,arg1[key],initial);else{var isSVG=el instanceof SVGElement,isFunc="function"==typeof arg2;if("style"===arg1&&"object"==typeof arg2)!function(view,arg1,arg2){var el=getEl(view);if("object"==typeof arg1)for(var key in arg1)setStyleValue(el,key,arg1[key]);else setStyleValue(el,arg1,arg2)}(el,arg2);else if(isSVG&&isFunc)el[arg1]=arg2;else if("dataset"===arg1)setData(el,arg2);else if(isSVG||!(arg1 in el)&&!isFunc||"list"===arg1){if(isSVG&&"xlink"===arg1)return void setXlink(el,arg2);initial&&"class"===arg1&&(arg2=el.className+" "+arg2),null==arg2?el.removeAttribute(arg1):el.setAttribute(arg1,arg2)}else el[arg1]=arg2}}function setXlink(el,arg1,arg2){if("object"==typeof arg1)for(var key in arg1)setXlink(el,key,arg1[key]);else null!=arg2?el.setAttributeNS(xlinkns,arg1,arg2):el.removeAttributeNS(xlinkns,arg1,arg2)}function setData(el,arg1,arg2){if("object"==typeof arg1)for(var key in arg1)setData(el,key,arg1[key]);else null!=arg2?el.dataset[arg1]=arg2:delete el.dataset[arg1]}function redom_es_text(str){return document.createTextNode(null!=str?str:"")}function parseArgumentsInternal(element,args,initial){for(var i=0,list=args;i<list.length;i+=1){var arg=list[i];if(0===arg||arg){var type=typeof arg;"function"===type?arg(element):"string"===type||"number"===type?element.appendChild(redom_es_text(arg)):isNode(getEl(arg))?mount(element,arg):arg.length?parseArgumentsInternal(element,arg,initial):"object"===type&&setAttrInternal(element,arg,null,initial)}}}function ensureEl(parent){return"string"==typeof parent?html(parent):getEl(parent)}function getEl(parent){return parent.nodeType&&parent||!parent.el&&parent||getEl(parent.el)}function isNode(arg){return arg&&arg.nodeType}function html(query){for(var element,args=[],len=arguments.length-1;len-- >0;)args[len]=arguments[len+1];var type=typeof query;if("string"===type)element=createElement(query);else{if("function"!==type)throw new Error("At least one argument required");var Query=query;element=new(Function.prototype.bind.apply(Query,[null].concat(args)))}return parseArgumentsInternal(getEl(element),args,!0),element}var el=html;function setChildren(parent){for(var children=[],len=arguments.length-1;len-- >0;)children[len]=arguments[len+1];for(var current=traverse(parent,children,getEl(parent).firstChild);current;){var next=current.nextSibling;unmount(parent,current),current=next}}function traverse(parent,children,_current){for(var current=_current,childEls=Array(children.length),i=0;i<children.length;i++)childEls[i]=children[i]&&getEl(children[i]);for(var i$1=0;i$1<children.length;i$1++){var child=children[i$1];if(child){var childEl=childEls[i$1];if(childEl!==current)if(isNode(childEl)){var next=current&&current.nextSibling,replace=null!=child.__redom_index&&next===childEls[i$1+1];mount(parent,child,current,replace),replace&&(current=next)}else null!=child.length&&(current=traverse(parent,child,current));else current=current.nextSibling}}return current}html.extend=function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];return html.bind.apply(html,[this].concat(args))};var ListPool=function(View,key,initData){this.View=View,this.initData=initData,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=key&&(this.key="function"==typeof key?key:function(key){return function(item){return item[key]}}(key))};ListPool.prototype.update=function(data,context){for(var View=this.View,key=this.key,initData=this.initData,keySet=null!=key,oldLookup=this.lookup,newLookup={},newViews=Array(data.length),oldViews=this.views,i=0;i<data.length;i++){var item=data[i],view=void 0;if(keySet){var id=key(item);view=oldLookup[id]||new View(initData,item,i,data),newLookup[id]=view,view.__redom_id=id}else view=oldViews[i]||new View(initData,item,i,data);view.update&&view.update(item,i,data,context),getEl(view.el).__redom_view=view,newViews[i]=view}this.oldViews=oldViews,this.views=newViews,this.oldLookup=oldLookup,this.lookup=newLookup};var List=function(parent,View,key,initData){this.View=View,this.initData=initData,this.views=[],this.pool=new ListPool(View,key,initData),this.el=ensureEl(parent),this.keySet=null!=key};List.prototype.update=function(data,context){void 0===data&&(data=[]);var keySet=this.keySet,oldViews=this.views;this.pool.update(data,context);var ref$1=this.pool,views=ref$1.views,lookup=ref$1.lookup;if(keySet)for(var i=0;i<oldViews.length;i++){var oldView=oldViews[i];null==lookup[oldView.__redom_id]&&(oldView.__redom_index=null,unmount(this,oldView))}for(var i$1=0;i$1<views.length;i$1++){views[i$1].__redom_index=i$1}setChildren(this,views),keySet&&(this.lookup=lookup),this.views=views},List.extend=function(parent,View,key,initData){return List.bind(List,parent,View,key,initData)},List.extend;var Place=function(View,initData){this.el=redom_es_text(""),this.visible=!1,this.view=null,this._placeholder=this.el,View instanceof Node?this._el=View:View.el instanceof Node?(this._el=View,this.view=View):this._View=View,this._initData=initData};Place.prototype.update=function(visible,data){var placeholder=this._placeholder,parentNode=this.el.parentNode;if(visible){if(!this.visible)if(this._el)mount(parentNode,this._el,placeholder),unmount(parentNode,placeholder),this.el=getEl(this._el),this.visible=visible;else{var view=new(0,this._View)(this._initData);this.el=getEl(view),this.view=view,mount(parentNode,view,placeholder),unmount(parentNode,placeholder)}this.view&&this.view.update&&this.view.update(data)}else if(this.visible){if(this._el)return mount(parentNode,placeholder,this._el),unmount(parentNode,this._el),this.el=placeholder,void(this.visible=visible);mount(parentNode,placeholder,this.view),unmount(parentNode,this.view),this.el=placeholder,this.view=null}this.visible=visible};var Router=function(parent,Views,initData){this.el=ensureEl(parent),this.Views=Views,this.initData=initData};Router.prototype.update=function(route,data){if(route!==this.route){var View=this.Views[route];this.route=route,View&&(View instanceof Node||View.el instanceof Node)?this.view=View:this.view=View&&new View(this.initData,data),setChildren(this.el,[this.view])}this.view&&this.view.update&&this.view.update(data,route)};var ns="http://www.w3.org/2000/svg";function svg(query){for(var element,args=[],len=arguments.length-1;len-- >0;)args[len]=arguments[len+1];var type=typeof query;if("string"===type)element=createElement(query,ns);else{if("function"!==type)throw new Error("At least one argument required");var Query=query;element=new(Function.prototype.bind.apply(Query,[null].concat(args)))}return parseArgumentsInternal(getEl(element),args,!0),element}svg.extend=function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];return svg.bind.apply(svg,[this].concat(args))},svg.ns=ns;var injectStylesIntoStyleTag=__webpack_require__(379),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__(795),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__(569),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__(565),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__(216),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__(589),styleTagTransform_default=__webpack_require__.n(styleTagTransform),app=__webpack_require__(991),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(app.Z,options);app.Z&&app.Z.locals&&app.Z.locals;let url=new URL(window.location),display=el("#display"),controlsList=el("fieldset"),imageTitle="image",fullscreen=JSON.parse(localStorage.getItem("fullscreen"));const rgbToHex=function(rgb){if(rgb&&"none"!==rgb){let colours=rgb.split(")")[0].split("rgb(")[1].split(", "),res="#";for(var i=0;i<colours.length;i++){let hex=Number(colours[i]).toString(16);hex.length<2&&(hex="0"+hex),res+=hex}return res}return"#000000"},capitalise=function(s){if(s)return s[0].toUpperCase()+s.slice(1)},SVGParser=function(str){return(new DOMParser).parseFromString(str,"text/html").body.childNodes[0]},getOpt=function(key){if(key)return url.searchParams.get(key)||original[key];{let hashes=url.search.slice(url.search.indexOf("?")+1).split("&"),params={};return hashes.map((hash=>{let[key,val]=hash.split("=");params[key]=decodeURIComponent(val)})),params}},setOpt=function(objectOrKey,value){if(objectOrKey){let setUrl=(key,val)=>{key&&!val?url.searchParams.delete(key):url.searchParams.set(encodeURIComponent(key),encodeURIComponent(val))};if("object"==typeof objectOrKey&&objectOrKey.constructor===Object)for(var key in objectOrKey)objectOrKey.hasOwnProperty(key)&&setUrl(key,objectOrKey[key]);else setUrl(objectOrKey,value);window.history.replaceState("","",url)}};let opt={src:"",exportWidth:1,exportHeight:1,lockColour:[],lockSize:[],localFile:0,exportUnit:""},original={width:1,height:1,ratio:1,exportUnit:"px"};for(let key in opt)opt.hasOwnProperty(key)&&Object.defineProperty(opt,key,{set:val=>setOpt(key,val),get:()=>getOpt(key)});const downloadSVG=function(){let svg=display.getElementsByTagName("svg")[0],data=(new XMLSerializer).serializeToString(svg),exportWidth=Math.round(convertUnit(opt.exportWidth,opt.exportUnit,"px")),exportHeight=Math.round(convertUnit(opt.exportHeight,opt.exportUnit,"px")),canvas=el("canvas",{width:exportWidth,height:exportHeight}),ctx=canvas.getContext("2d"),image=new Image,filetype=document.querySelector('input[name="filetype"]:checked').value,extension=document.querySelector('input[name="filetype"]:checked').dataset.extension,filename=imageTitle+"_"+exportWidth+"x"+exportHeight+"."+extension;image.addEventListener("load",(function(){"image/jpeg"===filetype&&(ctx.fillStyle="#ffffff",ctx.fillRect(0,0,canvas.width,canvas.height)),ctx.drawImage(image,0,0,exportWidth,exportHeight),canvas.toBlob((function(blob){let newImg=document.createElement("img"),url=URL.createObjectURL(blob);newImg.onload=function(){URL.revokeObjectURL(url)},newImg.src=url;let event=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});el("a",{download:filename,href:url,target:"_blank"}).dispatchEvent(event)}),filetype,1)})),image.src="data:image/svg+xml,"+encodeURIComponent(data)},convertUnit=function(v,from,to){return"in"===from&&"px"===to?96*v:"px"===from&&"in"===to?v/96:"in"===from&&"mm"===to?25.4*v:"mm"===from&&"in"===to?v/25.4:"mm"===from&&"px"===to?3.77952755905511*v:"px"===from&&"mm"===to?v/3.77952755905511:from===to?v:void 0},resetPage=function(){wrapper.classList.remove("loaded","dragging"),display.innerHTML="",controlsList.innerHTML="",document.getElementById("image_title").innerHTML="",imageTitle="image";let opts=getOpt();for(var key in opts)opts.hasOwnProperty(key)&&setOpt(key,"")},selectThis=function(e){e.target.select()},changeExportSize=function(e){let round=function(v){return"px"===opt.exportUnit?Math.round(v):v};if(e.target.value=round(e.target.value),"export_width"===e.target.id){let newWidth=round(e.target.value/original.ratio);document.getElementById("export_height").value=newWidth,opt.exportWidth=e.target.value,opt.exportHeight=newWidth}else if("export_height"===e.target.id){let newHeight=round(e.target.value*original.ratio);document.getElementById("export_width").value=newHeight,opt.exportHeight=e.target.value,opt.exportWidth=newHeight}},changeExportUnit=function(e){if(!e.target.classList.contains("on")){e.target.classList.add("on");let siblings=[],n=e.target.parentNode.firstChild;for(;n;n=n.nextSibling)1==n.nodeType&&n!=e.target&&siblings.push(n);for(let i=0;i<siblings.length;i++)siblings[i].classList.remove("on");let newExportUnit=e.target.dataset.unit,width=document.getElementById("export_width"),height=document.getElementById("export_height");width.value=convertUnit(width.value,opt.exportUnit,newExportUnit),height.value=convertUnit(height.value,opt.exportUnit,newExportUnit);let inputEvent=new Event("input",{bubbles:!0,cancelable:!0});opt.exportUnit=newExportUnit,width.dispatchEvent(inputEvent),height.dispatchEvent(inputEvent);let units=document.getElementById("export_size").getElementsByClassName("unit");for(let i=0;i<units.length;i++)units[i].innerHTML=newExportUnit}},renderPage=function(classes){!function(){let search=new URL(window.location).search.slice(url.search.indexOf("?")+1).split("&");for(var i=0;i<search.length;i++){let key=search[i].split("=")[0];opt.hasOwnProperty(key)||setOpt(key,"")}}();const resizeButton=()=>SVGParser(fullscreen?'<svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 0 24 24" width="48px" fill="#000000"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 0 24 24" width="48px" fill="#000000"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>');let wrapper=el("#wrapper",[el("header",[el(".title",[el("h1","SVG Custom Exporter"),el("span#image_title",imageTitle.replace(/_/g," ")),el("span#reset",el("span","Reset"),{title:"Click here to reset everything",onclick:resetPage})]),el("a.github",SVGParser('<svg width="98" height="96" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="#24292f"/></svg>'),{href:"https://github.com/tmrk/SVG-custom-exporter",title:"Code on GitHub"}),el("div.resize",resizeButton(),{title:fullscreen?"Exit fullscreen":"Go fullscreen",onclick:function(e){e.stopPropagation(),fullscreen=!fullscreen,fullscreen?(wrapper.classList.add("fullscreen"),this.title="Exit fullscreen"):(wrapper.classList.remove("fullscreen"),this.title="Go fullscreen"),this.innerHTML=null,this.appendChild(resizeButton()),localStorage.setItem("fullscreen",fullscreen)}})]),el("main",[el("div#start",[el("#dropzone",[el("label",el("span","Drop an SVG file here or click here to select"),{for:"file"}),el("input#file",{type:"file",onchange:function(){if("image/svg+xml"==this.files[0].type){wrapper.classList.add("on");let file=this.files[0];var reader=new FileReader;reader.addEventListener("load",(function(e){processSVG(reader.result),wrapper.classList.add("loaded"),opt.localFile=1})),reader.readAsText(file)}else this.value=null,console.log("Not SVG!")},ondrop:function(){wrapper.classList.remove("dragging"),resetPage()},ondragleave:function(){wrapper.classList.remove("dragging")}})]),el("#url",[el("label","Or paste a URL path to an SVG file:",{for:"urlsrc"}),el("input#urlsrc",{type:"text",spellcheck:!1,onfocus:selectThis,value:"https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg"}),el("button","Open",{onclick:function(){fetchSVG(document.getElementById("urlsrc").value),wrapper.classList.add("loaded")}})])]),el("div.left",[display,el("fieldset",[el("legend",["Specify size and file type to export: ",el("span#size_px","pixel",{title:"Size in pixels","data-unit":"px",onclick:changeExportUnit}),el("span#size_in","inch",{title:"Size in inches","data-unit":"in",onclick:changeExportUnit}),el("span#size_mm","mm",{title:"Size in millimetres","data-unit":"mm",onclick:changeExportUnit})]),el("div#export_size",[el("label","Width:",{for:"export_width"}),el("input#export_width",{type:"number",oninput:changeExportSize,onfocus:selectThis}),el("span.unit",opt.exportUnit),el("label","Height:",{for:"export_height"}),el("input#export_height",{type:"number",oninput:changeExportSize,onfocus:selectThis}),el("span.unit",opt.exportUnit)]),el("div",[el("input#filetype_png",{name:"filetype",type:"radio",value:"image/png","data-extension":"png",checked:!0}),el("label","PNG",{for:"filetype_png"}),el("input#filetype_jpg",{name:"filetype",type:"radio",value:"image/jpeg","data-extension":"jpg"}),el("label","JPG",{for:"filetype_jpg"})]),el("button#download","Download",{onclick:downloadSVG})])]),el("div#controls",[el("h2","Control layers"),controlsList])]),el("footer",[])],{classList:classes||"",ondragenter:function(){this.classList.add("dragging")}});document.body.appendChild(wrapper),document.getElementById("size_"+opt.exportUnit).classList.add("on")},processSVG=function(svg){let node=document.createElementNS("http://www.w3.org/2000/svg","g"),doc=(new DOMParser).parseFromString(svg,"image/svg+xml");node.appendChild(doc.documentElement);let svgNode=node.childNodes[0],svgParts=Array.from(svgNode.querySelectorAll("rect,path,circle,line,polygon,polyline,text,textPath,ellipse"));svgNode.style.width="100%",svgNode.style.height="100%",svgNode.style.padding="10px",display.append(svgNode),original.width=Math.round(svgNode.width.baseVal.value),original.height=Math.round(svgNode.height.baseVal.value),original.ratio=original.width/original.height,opt.exportWidth&&(opt.exportWidth=Math.round(parseFloat(opt.exportWidth))),opt.exportWidth?opt.exportHeight=Math.round(parseFloat(opt.exportWidth)/original.ratio):!opt.exportWidth&&opt.exportHeight?opt.exportWidth=Math.round(parseFloat(opt.exportHeight)*original.ratio):(opt.exportWidth=Math.round(original.width),opt.exportHeight=Math.round(original.height)),document.getElementById("export_width").value=opt.exportWidth,document.getElementById("export_height").value=opt.exportHeight;let tags={};for(var i=0;i<svgParts.length;i++){let inputID="svgPart-"+i;tags[svgParts[i].tagName]?tags[svgParts[i].tagName]++:tags[svgParts[i].tagName]=1;let inputName=svgParts[i].attributes["aria-label"]?svgParts[i].attributes["aria-label"].value:Array.from(svgParts[i].childNodes).filter((tag=>"title"===tag.tagName))[0]?Array.from(svgParts[i].childNodes).filter((tag=>"title"===tag.tagName))[0].innerHTML:capitalise(svgParts[i].tagName)+" "+tags[svgParts[i].tagName],fill=rgbToHex(getComputedStyle(svgParts[i]).fill);controlsList.appendChild(el("div",[el("input",{id:inputID,type:"checkbox","data-id":i,checked:!0,onchange:function(){svgParts[this.dataset.id].setAttribute("visibility",this.checked?"visible":"hidden")}}),el("label",inputName,{for:inputID}),el("input",{type:"color",title:"Change color",value:fill,"data-id":i,onchange:function(){svgParts[this.dataset.id].setAttribute("fill",this.value),svgParts[this.dataset.id].style.fill=this.value}})]))}localStorage.setItem("svg",svg)},fetchSVG=function(src){fetch(src).then((response=>{if(!response.ok)throw console.log("Error"),response;return opt.src=src,response.text()})).then((svg=>{processSVG(svg),localStorage.setItem("imageTitle",src.split("/")[src.split("/").length-1].split(".")[0])}))},wrapperClasses=new Set;fullscreen&&wrapperClasses.add("fullscreen"),window.innerWidth<=400&&wrapperClasses.add("mobile"),opt.localFile&&localStorage.getItem("svg")?(wrapperClasses.add("loaded"),processSVG(localStorage.getItem("svg"))):opt.src?(imageTitle=opt.src.split("/")[opt.src.split("/").length-1].split(".")[0],wrapperClasses.add("loaded"),renderPage([...wrapperClasses].join("  ")),fetchSVG(opt.src)):renderPage([...wrapperClasses].join("  "))})()})();